<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta charset='utf-8'>
    <title>Folkol Photo Wall Gallery</title>
    <script src='jquery-1.11.1.min.js'></script>
    <link rel='stylesheet' type='text/css' href='style.css'>
    <script>
    var initGallery = function(gallery, opts) {
      var opts = opts || {
        perfectHeight: 300 // TODO: Divisor of galleryHeight when we crop
      };

      var galleryWidth = gallery.width();
      gallery.width(galleryWidth); // TODO: Remove this when we can resize

    	var images = gallery.find('img').get();
      gallery.empty();

      // TODO: Resize in place instead of removing?
    	while(images.length > 0) {
	    	var row = [];
	    	var rowWidth = 0;

        while(rowWidth < galleryWidth && images.length > 0) {
          var image = $(images.shift());
          image.outerHeight(opts.perfectHeight);

          row.push(image);
          gallery.append(image);
          rowWidth += image.outerWidth();
	    	};

	    	var rowRatio = galleryWidth*1.0 / rowWidth;
	    	$(row).each(function(i, e) {
	    		var image = $(e);
	    		image.outerWidth(image.outerWidth() * rowRatio);
          image.outerHeight(opts.perfectHeight * rowRatio);
	    	});
    	}
    }
    $(window).load(function () {
      var gallery = $("div.gallery");
      initGallery(gallery);
    });
    // $(window).resize(initGallery($("div.gallery"))); // TODO: Fix resize
  	</script>
  </head>
  <body>
  	<div class='gallery'>
  		<img src='image1.jpeg'>
  		<img src='image2.jpeg'>
  		<img src='image3.jpeg'>
  		<img src='image4.jpeg'>
  		<img src='image5.jpeg'>
  		<img src='image6.jpeg'>
  	</div>
  </body>
</html>
